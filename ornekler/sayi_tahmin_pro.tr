// ---------------------------------------------------------
// PROJE: SAYI TAHMIN PRO (ornekler/sayi_tahmin_pro.tr)
// Gümüşdil Özelliklerini Gösteren Kapsamlı Örnek
// ---------------------------------------------------------

// Kutuphaneleri Dahil Et
dahil_et("io.tr")
dahil_et("matematik.tr")
dahil_et("oyun_gelismis.tr")

// Global Ayarlar
deÄŸiÅŸken ZORLUK_SEVIYESI = 1  // 1: Kolay, 2: Orta, 3: Zor
deÄŸiÅŸken REKOR_DOSYASI = "rekor.txt"

// --- OYUN MANTIGI ---

fonksiyon zorluk_sec() {
    io_baslik("ZORLUK SEVIYESI")
    yazdÄ±r("1. Kolay (1-50, 10 Hak)")
    yazdÄ±r("2. Orta  (1-100, 7 Hak)")
    yazdÄ±r("3. Zor   (1-1000, 5 Hak)")
    
    yazdÄ±r("Seciminiz (1-3):")
    deÄŸiÅŸken secim = sayi(girdi())
    
    eÄŸer (secim < 1 veya secim > 3) {
        yazdÄ±r("Gecersiz secim! Varsayilan: Orta")
        secim = 2
    }
    
    dÃ¶n secim
}

fonksiyon oyun_baslat() {
    io_temizle()
    io_baslik("SAYI TAHMIN PRO v1.0")
    
    ZORLUK_SEVIYESI = zorluk_sec()
    
    deÄŸiÅŸken max_sayi = 100
    deÄŸiÅŸken hak = 7
    
    eÄŸer (ZORLUK_SEVIYESI == 1) {
        max_sayi = 50
        hak = 10
    }
    
    eÄŸer (ZORLUK_SEVIYESI == 3) {
        max_sayi = 1000
        hak = 5
    }
    
    // Hedef sayiyi belirle
    deÄŸiÅŸken hedef = rastgele() 
    // Not: rastgele() 0-32767 doner, mod almamiz lazim ama mod yok
    // Basit bir mod simulasyonu: 
    // hedef = hedef - (hedef / max_sayi) * max_sayi
    // (veya mat_kutuphanesinde mod varsa onu kullan)
    
    // Simdilik rastgele 1-100 arasi ureten basit mantik:
    deÄŸiÅŸken oran = hedef / 32767
    // Bu float olacagi icin sorun cikabilir, Gumusdil henuz float tam desteklemiyor olabilir
    // En iyisi oyun_zar_at kullanalim (oyun_gelismis.tr)
    
    hedef = oyun_zar_at(max_sayi)
    
    renkli_yazdir("sari", ">>> 1 ile " + metin(max_sayi) + " arasinda bir sayi tuttum.")
    renkli_yazdir("sari", ">>> Toplam " + metin(hak) + " hakkin var. Baslayalim!")
    yazdÄ±r("")
    
    deÄŸiÅŸken deneme = 0
    deÄŸiÅŸken kazanilan = yanlÄ±ÅŸ
    
    dÃ¶ngÃ¼ (deneme < hak) {
        deneme = deneme + 1
        renkli_yazdir("turkuaz", "Tahmin " + metin(deneme) + "/" + metin(hak) + ": ")
        
        deÄŸiÅŸken tahmin = sayi(girdi())
        
        eÄŸer (tahmin == hedef) {
            kazanilan = doÄŸru
            dÃ¶n 1 // Break olmadigi icin return ile cikiyoruz
        }
        
        eÄŸer (tahmin < hedef) {
            yazdÄ±r("Daha BUYUK bir sayi soyle! ^")
        } degilse {
            yazdÄ±r("Daha KUCUK bir sayi soyle! v")
        }
        
        // Sicak/Soguk ipucu (Matematik kutuphanesi kullanimi)
        deÄŸiÅŸken fark = mat_mutlak_deÄŸer(hedef - tahmin)
        eÄŸer (fark <= 5) {
            renkli_yazdir("kirmizi", "(COK SICAK!)")
        }
    }
    
    // Oyun Sonu
    io_temizle()
    eÄŸer (kazanilan) {
        io_baslik("TEBRIKLER! KAZANDINIZ!")
        renkli_yazdir("yesil", "Sayi: " + metin(hedef))
        renkli_yazdir("yesil", "Puan: " + metin((hak - deneme + 1) * 100 * ZORLUK_SEVIYESI))
    } degilse {
        io_baslik("OYUN BITTI - KAYBETTINIZ")
        renkli_yazdir("kirmizi", "Tutulan Sayi: " + metin(hedef))
        yazdÄ±r("Bir dahaki sefere!")
    }
    
    dÃ¶n 0
}

// Ana Program dongusu
deÄŸiÅŸken devam = doÄŸru
dÃ¶ngÃ¼ (devam) {
    oyun_baslat()
    
    yazdÄ±r("")
    yazdÄ±r("Tekrar oynamak ister misin? (e/h)")
    deÄŸiÅŸken cevap = girdi()
    
    eÄŸer (cevap == "h" veya cevap == "H") {
        devam = yanlÄ±ÅŸ
    }
}

yazdÄ±r("Gule gule!")

